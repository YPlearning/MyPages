<html>

<head>
    <title>数据库查询</title>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../lib/elementui/theme-chalk/index.css" type="text/css">

    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="../lib/vue.js"></script>
</head>

<body>
    <div id="app">

        <template>
            <el-table
              :data="tableData"
              style="width: 100%"
              height="600"
              :stripe="true"
              :highlight-current-row="true"
              @row-click="openDetails">
              <el-table-column
                prop="num"
                label="日期"
                width="180">
              </el-table-column>
              <el-table-column
                prop="name"
                label="姓名"
                width="180">
              </el-table-column>
              <el-table-column
                prop="tel"
                label="地址">
              </el-table-column>
            </el-table>
          </template>

        <el-button type="primary" plain @click="getTabelData">获取数据库数据</el-button>
        <p>
            {{ message }}
        </p>

    </div>

    <!-- 引入组件库 -->
    <script type="text/javascript" src="../lib/elementui/index.js"></script>

    <script type="text/javascript">
        var dataControl = new Vue({
            el: "#app",
            data: {
                tableData: [],
                message:"hello"
            },

            methods: {
                getTabelData: function() {
                    $.getJSON("http://localhost:7080/getuser", function(data) {
                        //console.log(data)
                        for (j = 0; j < data.length; j++) {
                            var text = data[j]
                            var myJSON = JSON.stringify(text)
                            var obj = JSON.parse(myJSON)
                            console.log(myJSON)
                            dataControl._data.tableData.push(obj)
                        }
                    });
                    /*添加新的行数
                    var newValue = {
                        num: "123",
                        name: "new",
                        tel: "99999"
                    }
                    dataControl._data.tableData.push(newValue)*/
                }
            },
            openDetails: function () {
                //具体操作        
                message = "asdasd"
            }
        });
    </script>

</body>

</html>